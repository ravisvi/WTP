<!DOCTYPE html>
<html>
	<head>
		<title> Please Work! </title>
		<script type="text/javascript" src="js/snd.js"></script>
	</head>

	<body>
		<div id="timer" style="background: #aaaaaa;">
			Timer : <a id="timerval">0</a>
		</div>
		<div id="score" style="background: #bbbbbb;">
			Score :
		</div>
		<div id="game" style="position: absolute; width: 80%; height: 80%; background: #999999;">

		</div>
	</body>
</html>

<script type="text/javascript">
	window.addEventListener("keydown", function() {
		handleType();
	}, true);

	var cur_list;
	var readonly_cur_list;
	var t;
	var fonts = new Array("Helvetica", "Book Antiqua", "Arial Black", "Comic Sans MS", "Copperplate Gothic Light", "Rage Italic", "Times New Roman", "Futura");

	function init() {
		t = setInterval(function() {
			document.getElementById("timerval").innerHTML = parseInt(document.getElementById("timerval").innerHTML) + 1;
		}, 1000);

		cur_list = new Array();
		readonly_cur_list = new Array();

		for (var i = 0; i < Math.ceil(Math.random() * 6) + 2; i++) {
			var thisWord = select_word();
			cur_list[i] = thisWord;
			readonly_cur_list[i] = thisWord;
			document.getElementById("game").innerHTML += "<p id='" + thisWord + "' style='position: absolute; font-family: " + 
			fonts[Math.floor(Math.random() * 8)] + ";font-size: " + (Math.random() * 75 + 100) + "% ;top: " + 
			(10 + (Math.random() * 80)) + "%; left: " + (10 + (Math.random() * 80)) + "%;'>" + thisWord + "</p>";
		};
	}

	function handleType() {
		var letter = String.fromCharCode(event.keyCode + 32);
		for (var i = 0; i < cur_list.length; i++) {
			if (letter == cur_list[i].charAt(0)) {
				cur_list[i] = cur_list[i].substr(1);
				document.getElementById(readonly_cur_list[i]).innerHTML = cur_list[i];
				break;
			}
		};

		var complete = true;
		for (var i = 0; i < cur_list.length; i++) {
			if (cur_list[i].length != 0) {
				complete = false;
			}
		}

		if (complete) {
			clearInterval(t);
			document.getElementById("score").innerHTML = "Score : " + document.getElementById("timerval").innerHTML;
			init();
		}
	}

	init(); 
</script>